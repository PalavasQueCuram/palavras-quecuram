<!-- 🔐 Login -->
<div id="authArea" style="max-width:400px;margin:2rem auto;display:none;text-align:center">
  <h2>Entrar / Criar Conta</h2>
  <input type="email" id="email" placeholder="E-mail" style="margin:0.5rem;width:90%;padding:0.5rem" /><br />
  <input type="password" id="senha" placeholder="Senha" style="margin:0.5rem;width:90%;padding:0.5rem" /><br />
  <button onclick="registrar()">Criar conta</button>
  <button onclick="entrar()">Entrar</button>
</div>

<div style="text-align:center;display:none" id="userArea">
  <p>Bem-vindo, <span id="userEmail"></span>!</p>
  <button onclick="sair()">Sair</button>
</div>

<script type="module">
  // 🧩 Firebase v9 Modular
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import {
    getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword,
    signOut, onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "SEU_PROJETO.firebaseapp.com",
    projectId: "SEU_PROJETO",
    storageBucket: "SEU_PROJETO.appspot.com",
    messagingSenderId: "XXXXXXXXX",
    appId: "XXXXXXXXX"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth();

  // Controle de sessão
  onAuthStateChanged(auth, user => {
    const authArea = document.getElementById("authArea");
    const userArea = document.getElementById("userArea");
    const geradorForm = document.getElementById("geradorForm");
    const acoes = document.getElementById("acoes");

    if (user) {
      document.getElementById("userEmail").textContent = user.email;
      authArea.style.display = "none";
      userArea.style.display = "block";
      geradorForm.style.display = "block";
    } else {
      userArea.style.display = "none";
      authArea.style.display = "block";
      geradorForm.style.display = "none";
      acoes.style.display = "none";
      document.getElementById("resultado").style.display = "none";
    }
  });

  // Criar conta
  window.registrar = async function () {
    const email = document.getElementById("email").value;
    const senha = document.getElementById("senha").value;
    try {
      await createUserWithEmailAndPassword(auth, email, senha);
      alert("Conta criada!");
    } catch (e) {
      alert("Erro: " + e.message);
    }
  };

  // Entrar
  window.entrar = async function () {
    const email = document.getElementById("email").value;
    const senha = document.getElementById("senha").value;
    try {
      await signInWithEmailAndPassword(auth, email, senha);
      alert("Login bem-sucedido!");
    } catch (e) {
      alert("Erro: " + e.message);
    }
  };

  // Sair
  window.sair = async function () {
    await signOut(auth);
  };
</script>
